{"componentChunkName":"component---src-templates-blog-post-js","path":"/2019-12-22-nodejs/","result":{"data":{"markdownRemark":{"html":"<p>Node.js는 싱글 스레드 어플리케이션 입니다. 하지만 event와 callback을 통해 동시성을 지원할 수 있습니다.\nNode.js에선 Event를 매우 많이 사용하고, 이것 때문에 다른 비슷한 기술들 보다 훨씬 빠른 속도를 자랑합니다.\nNode.js 기반으로 만들어진 서버가 가동되면, 변수들을 initialize 하고, 함수를 선언하고 이벤트가 일어날때까지 기다린다.</p>\n<p>이벤트 위주 (Event-Driven) 어플리케이션에서는, 이벤트를 대기하는 메인 루프가 있습니다.\n그리고 event들을 listen하고 하나의 이벤트가 감지되었을시 Callback함수를 호출합니다.</p>\n<img src='/assets/images/event_loop.jpg' width='900px' height='500px'/>\n<p>이벤트가 콜백과 비슷해 보이지만, 차이점이 있습니다. 차이점은, 콜백함수는 비동기식 함수에서 결과를 반환할때 호출되지만, 이벤트 핸들링은 옵저버 패턴에 의해 작동 된다는점 입니다.</p>\n<p>EventListeners 함수들이 옵저버 역할을 합니다. event가 실행될때 까지 기다리다가 실행되면 listener(이벤트 처리 함수) 기능이 실행됩니다.\nNode.js에는 events 모듈과 EventEmitter 클래스가 내장되어있다. 이를 사용해서 event와 event listner를 바인딩 할 수 있습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">// events 모듈 사용\nvar events = require(&#39;events&#39;);\n\n// EventEmitter 객체 생성\nvar eventEmitter = new events.EventEmitter();</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>다음은 이벤트 핸들러와 이벤트를 연동시키는 구문이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">// event와 EventHandler 를 연동(bind)\n// eventName 은 임의로 설정 가능\neventEmitter.on(&#39;eventName&#39;, eventHandler);</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>프로그램안에서 이벤트를 발생시킬때의 구문이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">eventEmitter.emit(&#39;eventName&#39;);</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<h2>이벤트 핸들링 예제</h2>\n<p>이벤트를 다루는 예제를 작성해보도록 하자.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">// events 모듈 사용\nvar events = require(&#39;events&#39;);\n\n// EventEmitter 객체 생성\nvar eventEmitter = new events.EventEmitter();\n\n// EventHandler 함수 생성\nvar connectHandler = function connected(){\n    console.log(&quot;Connection Successful&quot;);\n\n    // data_recevied 이벤트를 발생시키기\n    eventEmitter.emit(&quot;data_received&quot;);\n}\n\n// connection 이벤트와 connectHandler 이벤트 핸들러를 연동\neventEmitter.on(&#39;connection&#39;, connectHandler);\n\n// data_received 이벤트와 익명 함수와 연동\n// 함수를 변수안에 담는 대신에, .on() 메소드의 인자로 직접 함수를 전달\neventEmitter.on(&#39;data_received&#39;, function(){\n    console.log(&quot;Data Received&quot;);\n});\n\n// connection 이벤트 발생시키기\neventEmitter.emit(&#39;connection&#39;);\n\nconsole.log(&quot;Program has ended&quot;);</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>출력결과</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">$ node main.js\nConnection Successful\nData Received\nProgram has ended</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>참고</p>\n<ul>\n<li><a href=\"https://velopert.com/267\">velopert</a></li>\n</ul>","frontmatter":{"title":"Node.js & event driven programming?","date":"December 22, 2019"},"id":"cae631b3-abb2-5fac-b4c7-af1766862aee"},"site":{"siteMetadata":{"title":"YoungGyu Blog","siteUrl":"http://answer.netlify.app","comment":{"disqusShortName":"Your Disqus-short-name here"}}}},"pageContext":{"slug":"/2019-12-22-nodejs/","previous":{"fields":{"slug":"/2019-12-22-forEachMap/"},"frontmatter":{"title":"forEach와 map의 차이점?","tag":["Posts"],"layout":null}},"next":{"fields":{"slug":"/2019-12-22-webserverWasNode/"},"frontmatter":{"title":"Web Serve와 Was에대해 알아보자.","tag":["Posts"],"layout":null}}}},"staticQueryHashes":["3668704128"]}